---
import Layout from '../../layouts/Layout.astro';
import Nav from '../../components/Nav.astro';
import Footer from '../../components/Footer.astro';
import Button from '../../components/ui/Button.astro';
import SectionHeader from '../../components/ui/SectionHeader.astro';
import { heroVideos, videoUrl } from '../../config/videos';

const hero = heroVideos.portfolio;

const projects = [
  {
    id: 1,
    title: "Informe Anual Banco Central",
    category: "Video Corporativo",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-1.jpg",
    description: "Video del informe anual destacando los logros y visión del banco."
  },
  {
    id: 2,
    title: "Tech Summit Santiago",
    category: "Eventos",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-2.jpg",
    description: "Cobertura multicámara de la conferencia tecnológica más grande de Chile."
  },
  {
    id: 3,
    title: "Startup Chile Podcast",
    category: "Podcasts",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-3.jpg",
    description: "Serie semanal de podcasts con los mejores emprendedores de Latinoamérica."
  },
  {
    id: 4,
    title: "Inmobiliaria Almagro",
    category: "Inmobiliario 3D",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-4.jpg",
    description: "Tours virtuales para desarrollo residencial premium en Las Condes."
  },
  {
    id: 5,
    title: "Campaña Social Fintech",
    category: "Redes Sociales",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-5.jpg",
    description: "Serie de 30 piezas de contenido para lanzamiento de producto."
  },
  {
    id: 6,
    title: "Conferencia Global Híbrida",
    category: "Streaming",
    year: "2023",
    thumbnail: "/images/portfolio/placeholder-6.jpg",
    description: "Transmisión en vivo a más de 5,000 asistentes remotos en 12 países."
  },
  {
    id: 7,
    title: "Documental Corporación Minera",
    category: "Video Corporativo",
    year: "2023",
    thumbnail: "/images/portfolio/placeholder-7.jpg",
    description: "Documental de 15 minutos sobre prácticas de minería sustentable."
  },
  {
    id: 8,
    title: "Serie Entrevistas Ejecutivas",
    category: "Podcasts",
    year: "2023",
    thumbnail: "/images/portfolio/placeholder-8.jpg",
    description: "Serie de entrevistas C-suite para corporación multinacional."
  }
];

const categories = ["Todos", "Video Corporativo", "Podcasts", "Eventos", "Redes Sociales", "Streaming", "Inmobiliario 3D"];
---

<Layout title="Portafolio" description="Vea nuestro portafolio de producciones audiovisuales premium. Videos corporativos, podcasts, eventos, streaming y proyectos inmobiliarios 3D.">
  <Nav />

  <main>
    <section class="relative min-h-[50vh] flex items-center justify-center overflow-hidden pt-24">
      <div class="absolute inset-0 bg-brand-black">
        <video
          class="absolute inset-0 w-full h-full object-cover"
          autoplay muted loop playsinline
          poster={videoUrl(hero.poster)}
        >
          <source src={videoUrl(hero.desktop)} type="video/mp4" />
        </video>
        <div class="absolute inset-0 bg-brand-black/60"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-brand-black via-transparent to-brand-black/40"></div>
        <div class="film-grain"></div>
      </div>

      <div class="container relative z-10 text-center py-16">
        <div class="max-w-4xl mx-auto">
          <span class="inline-block text-brand-gold text-sm font-medium uppercase tracking-[0.2em] mb-6 reveal-on-scroll">
            Nuestro Trabajo
          </span>
          <h1 class="font-display text-4xl md:text-6xl lg:text-7xl font-medium text-brand-cream mb-8 leading-tight reveal-on-scroll">
            Portafolio
          </h1>
          <p class="text-lg md:text-xl text-brand-gray-light max-w-2xl mx-auto font-light reveal-on-scroll">
            Una selección de proyectos que muestran nuestro enfoque cinematográfico en la narrativa corporativa.
          </p>
        </div>
      </div>
    </section>

    <section class="py-8 bg-brand-black border-b border-brand-gray-dark/20">
      <div class="container">
        <div class="flex flex-wrap justify-center gap-3" id="filter-buttons">
          {categories.map((category, index) => (
            <button
              class={`px-6 py-2 text-sm font-medium uppercase tracking-[0.1em] border transition-all duration-300 filter-btn ${index === 0 ? 'bg-brand-gold text-brand-black border-brand-gold' : 'bg-transparent text-brand-gray-light border-brand-gray-dark hover:border-brand-gold hover:text-brand-gold'}`}
              data-filter={category === "Todos" ? "all" : category}
            >
              {category}
            </button>
          ))}
        </div>
      </div>
    </section>

    <section class="section bg-brand-black">
      <div class="container">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="portfolio-grid">
          {projects.map((project) => (
            <article
              class="group relative overflow-hidden bg-brand-black-light border border-brand-gray-dark/20 hover:border-brand-gold/30 transition-all duration-500 portfolio-item reveal-on-scroll"
              data-category={project.category}
            >
              <div class="aspect-video bg-brand-black-light relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-brand-gray-dark/30 to-brand-black"></div>
                <div class="absolute inset-0 bg-brand-black/80 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center">
                  <span class="text-brand-gold text-sm uppercase tracking-widest">Ver Proyecto</span>
                </div>
              </div>
              <div class="p-6">
                <div class="flex items-center justify-between mb-3">
                  <span class="text-brand-gold text-xs uppercase tracking-widest">{project.category}</span>
                  <span class="text-brand-gray text-xs">{project.year}</span>
                </div>
                <h3 class="font-display text-xl text-brand-cream group-hover:text-brand-gold transition-colors mb-2">
                  {project.title}
                </h3>
                <p class="text-brand-gray text-sm font-light line-clamp-2">
                  {project.description}
                </p>
              </div>
            </article>
          ))}
        </div>
        <div id="empty-state" class="hidden text-center py-20">
          <p class="text-brand-gray text-lg">No se encontraron proyectos en esta categoría.</p>
        </div>
      </div>
    </section>

    <section class="section bg-brand-black-light text-center border-t border-brand-gray-dark/20">
      <div class="container">
        <div class="max-w-3xl mx-auto">
          <SectionHeader title="Creemos Tu Próximo Proyecto" subtitle="Trabaja con Nosotros" align="center" />
          <p class="text-xl text-brand-gray-light font-light mb-12">
            ¿Listo para agregar tu proyecto a nuestro portafolio? Hablemos de cómo podemos dar vida a tu visión.
          </p>
          <Button href="/es/contact" variant="primary">Iniciar un Proyecto</Button>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
      }
    });
  }, { threshold: 0.1 });
  document.querySelectorAll('.reveal-on-scroll').forEach((el) => observer.observe(el));

  const filterButtons = document.querySelectorAll('.filter-btn');
  const portfolioItems = document.querySelectorAll('.portfolio-item');
  const emptyState = document.getElementById('empty-state');

  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      const filter = button.getAttribute('data-filter');
      filterButtons.forEach(btn => {
        btn.classList.remove('bg-brand-gold', 'text-brand-black', 'border-brand-gold');
        btn.classList.add('bg-transparent', 'text-brand-gray-light', 'border-brand-gray-dark');
      });
      button.classList.remove('bg-transparent', 'text-brand-gray-light', 'border-brand-gray-dark');
      button.classList.add('bg-brand-gold', 'text-brand-black', 'border-brand-gold');

      let visibleCount = 0;
      portfolioItems.forEach(item => {
        const category = item.getAttribute('data-category');
        if (filter === 'all' || category === filter) {
          item.style.display = 'block';
          visibleCount++;
        } else {
          item.style.display = 'none';
        }
      });
      if (emptyState) emptyState.classList.toggle('hidden', visibleCount > 0);
    });
  });
</script>
