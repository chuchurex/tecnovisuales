---
import Layout from '../layouts/Layout.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import Button from '../components/ui/Button.astro';
import SectionHeader from '../components/ui/SectionHeader.astro';

// Sample portfolio data - would typically come from a CMS
const projects = [
  {
    id: 1,
    title: "Banco Central Annual Report",
    category: "Corporate Film",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-1.jpg",
    description: "Annual report video showcasing the bank's achievements and vision."
  },
  {
    id: 2,
    title: "Tech Summit Santiago",
    category: "Events",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-2.jpg",
    description: "Multi-camera coverage of Chile's largest technology conference."
  },
  {
    id: 3,
    title: "Startup Chile Podcast",
    category: "Podcasts",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-3.jpg",
    description: "Weekly podcast series featuring Latin America's top entrepreneurs."
  },
  {
    id: 4,
    title: "Inmobiliaria Almagro",
    category: "3D Real Estate",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-4.jpg",
    description: "Virtual tours for premium residential development in Las Condes."
  },
  {
    id: 5,
    title: "Fintech Social Campaign",
    category: "Social Media",
    year: "2024",
    thumbnail: "/images/portfolio/placeholder-5.jpg",
    description: "30-piece social content series for product launch."
  },
  {
    id: 6,
    title: "Global Conference Hybrid",
    category: "Streaming",
    year: "2023",
    thumbnail: "/images/portfolio/placeholder-6.jpg",
    description: "Live streaming to 5,000+ remote attendees across 12 countries."
  },
  {
    id: 7,
    title: "Mining Corporation Documentary",
    category: "Corporate Film",
    year: "2023",
    thumbnail: "/images/portfolio/placeholder-7.jpg",
    description: "15-minute documentary on sustainable mining practices."
  },
  {
    id: 8,
    title: "Executive Interview Series",
    category: "Podcasts",
    year: "2023",
    thumbnail: "/images/portfolio/placeholder-8.jpg",
    description: "C-suite interview series for multinational corporation."
  }
];

const categories = ["All", "Corporate Film", "Podcasts", "Events", "Social Media", "Streaming", "3D Real Estate"];
---

<Layout title="Portfolio" description="View our portfolio of premium audiovisual productions. Corporate films, podcasts, events, streaming, and 3D real estate projects.">
  <Nav />

  <main>
    <!-- Hero Section -->
    <section class="relative min-h-[50vh] flex items-center justify-center overflow-hidden pt-24">
      <div class="absolute inset-0 bg-brand-black">
        <div class="absolute inset-0 bg-gradient-to-br from-brand-black via-brand-black-light to-brand-black opacity-90"></div>
        <div class="film-grain"></div>
      </div>

      <div class="container relative z-10 text-center py-16">
        <div class="max-w-4xl mx-auto">
          <span class="inline-block text-brand-gold text-sm font-medium uppercase tracking-[0.2em] mb-6 reveal-on-scroll">
            Our Work
          </span>

          <h1 class="font-display text-4xl md:text-6xl lg:text-7xl font-medium text-brand-cream mb-8 leading-tight reveal-on-scroll">
            Portfolio
          </h1>

          <p class="text-lg md:text-xl text-brand-gray-light max-w-2xl mx-auto font-light reveal-on-scroll">
            A selection of projects that showcase our cinematic approach to corporate storytelling.
          </p>
        </div>
      </div>
    </section>

    <!-- Filter Section -->
    <section class="py-8 bg-brand-black border-b border-brand-gray-dark/20">
      <div class="container">
        <div class="flex flex-wrap justify-center gap-3" id="filter-buttons">
          {categories.map((category, index) => (
            <button
              class={`px-6 py-2 text-sm font-medium uppercase tracking-[0.1em] border transition-all duration-300 filter-btn ${index === 0 ? 'bg-brand-gold text-brand-black border-brand-gold' : 'bg-transparent text-brand-gray-light border-brand-gray-dark hover:border-brand-gold hover:text-brand-gold'}`}
              data-filter={category === "All" ? "all" : category}
            >
              {category}
            </button>
          ))}
        </div>
      </div>
    </section>

    <!-- Portfolio Grid -->
    <section class="section bg-brand-black">
      <div class="container">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="portfolio-grid">
          {projects.map((project) => (
            <article
              class="group relative overflow-hidden bg-brand-black-light border border-brand-gray-dark/20 hover:border-brand-gold/30 transition-all duration-500 portfolio-item reveal-on-scroll"
              data-category={project.category}
            >
              <!-- Thumbnail -->
              <div class="aspect-video bg-brand-black-light relative overflow-hidden">
                <!-- Placeholder gradient - replace with actual images -->
                <div class="absolute inset-0 bg-gradient-to-br from-brand-gray-dark/30 to-brand-black"></div>

                <!-- Hover Overlay -->
                <div class="absolute inset-0 bg-brand-black/80 opacity-0 group-hover:opacity-100 transition-opacity duration-500 flex items-center justify-center">
                  <span class="text-brand-gold text-sm uppercase tracking-widest">View Project</span>
                </div>
              </div>

              <!-- Info -->
              <div class="p-6">
                <div class="flex items-center justify-between mb-3">
                  <span class="text-brand-gold text-xs uppercase tracking-widest">{project.category}</span>
                  <span class="text-brand-gray text-xs">{project.year}</span>
                </div>
                <h3 class="font-display text-xl text-brand-cream group-hover:text-brand-gold transition-colors mb-2">
                  {project.title}
                </h3>
                <p class="text-brand-gray text-sm font-light line-clamp-2">
                  {project.description}
                </p>
              </div>
            </article>
          ))}
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="hidden text-center py-20">
          <p class="text-brand-gray text-lg">No projects found in this category.</p>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="section bg-brand-black-light text-center border-t border-brand-gray-dark/20">
      <div class="container">
        <div class="max-w-3xl mx-auto">
          <SectionHeader
            title="Let's Create Your Next Project"
            subtitle="Work With Us"
            align="center"
          />
          <p class="text-xl text-brand-gray-light font-light mb-12">
            Ready to add your project to our portfolio? Let's discuss how we can bring your vision to life.
          </p>
          <Button href="/contact" variant="primary">
            Start a Project
          </Button>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</Layout>

<script>
  // Scroll reveal
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.reveal-on-scroll').forEach((el) => {
    observer.observe(el);
  });

  // Portfolio filtering
  const filterButtons = document.querySelectorAll('.filter-btn');
  const portfolioItems = document.querySelectorAll('.portfolio-item');
  const emptyState = document.getElementById('empty-state');

  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      const filter = button.getAttribute('data-filter');

      // Update active button
      filterButtons.forEach(btn => {
        btn.classList.remove('bg-brand-gold', 'text-brand-black', 'border-brand-gold');
        btn.classList.add('bg-transparent', 'text-brand-gray-light', 'border-brand-gray-dark');
      });
      button.classList.remove('bg-transparent', 'text-brand-gray-light', 'border-brand-gray-dark');
      button.classList.add('bg-brand-gold', 'text-brand-black', 'border-brand-gold');

      // Filter items
      let visibleCount = 0;
      portfolioItems.forEach(item => {
        const category = item.getAttribute('data-category');
        if (filter === 'all' || category === filter) {
          item.style.display = 'block';
          visibleCount++;
        } else {
          item.style.display = 'none';
        }
      });

      // Show/hide empty state
      if (emptyState) {
        emptyState.classList.toggle('hidden', visibleCount > 0);
      }
    });
  });
</script>
